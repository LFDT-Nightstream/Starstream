---
source: starstream-to-wasm/tests/snapshots.rs
input_file: starstream-to-wasm/tests/inputs/struct_definition.star
---
==== AST ====
Program {
    shebang: None,
    definitions: [
        Spanned {
            node: Struct(
                StructDef {
                    name: Identifier {
                        name: "Point",
                        span: 7..12,
                    },
                    fields: [
                        StructField {
                            name: Identifier {
                                name: "x",
                                span: 19..20,
                            },
                            ty: TypeAnnotation {
                                name: Identifier {
                                    name: "i64",
                                    span: 22..25,
                                },
                                generics: [],
                            },
                            span: 19..25,
                        },
                        StructField {
                            name: Identifier {
                                name: "y",
                                span: 31..32,
                            },
                            ty: TypeAnnotation {
                                name: Identifier {
                                    name: "i64",
                                    span: 34..37,
                                },
                                generics: [],
                            },
                            span: 31..37,
                        },
                    ],
                },
            ),
            span: 0..41,
        },
    ],
}

==== Inference trace ====

==== Typed AST ====
TypedProgram {
    definitions: [
        Struct(
            TypedStructDef {
                name: Identifier {
                    name: "Point",
                    span: 7..12,
                },
                fields: [
                    TypedStructField {
                        name: Identifier {
                            name: "x",
                            span: 19..20,
                        },
                        ty: Int(
                            I64,
                        ),
                    },
                    TypedStructField {
                        name: Identifier {
                            name: "y",
                            span: 31..32,
                        },
                        ty: Int(
                            I64,
                        ),
                    },
                ],
                ty: Record(
                    RecordType {
                        name: "Point",
                        fields: [
                            RecordFieldType {
                                name: "x",
                                ty: Int(
                                    I64,
                                ),
                            },
                            RecordFieldType {
                                name: "y",
                                ty: Int(
                                    I64,
                                ),
                            },
                        ],
                    },
                ),
            },
        ),
    ],
}

==== Core WebAssembly ====
(module
  (@custom "component-type"
    (component
      (@custom "wit-component-encoding" "\04\00")
      (type (;0;)
        (component
          (type (;0;)
            (component
              (type (;0;) (record (field "x" s64) (field "y" s64)))
              (import "point" (type (;1;) (eq 0)))
            )
          )
          (export (;0;) "my-namespace:my-package/my-world" (component (type 0)))
        )
      )
      (export (;1;) "x" (type 0))
    )
  ))

==== WIT ====
package root:component;

world root {
  record point {
    x: s64,
    y: s64,
  }
}
